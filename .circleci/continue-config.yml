version: 2.1

orbs:
  path-filtering: circleci/path-filtering@1.2.0  # Official CircleCI path-filtering orb

parameters:
  build_common:
    type: boolean
    default: false
  build_japan:
    type: boolean
    default: false

jobs:
  build-and-push-common-image:
    docker:
      - image: cimg/base:stable
    steps:
      - checkout
      - run: echo "Building and pushing COMMON service image..."

  build-and-push-japan-image:
    docker:
      - image: cimg/base:stable
    steps:
      - checkout
      - run: echo "Building and pushing JAPAN service image..."

workflows:
  build-and-push-common-image:
      when: << pipeline.parameters.build_common >>
          
  build-and-push-japan-image:
      when: << pipeline.parameters.build_japan >>
